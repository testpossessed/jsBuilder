!function(){"use strict";function a(a,b){function c(a,b,c){return"function"==typeof b?b(c):b===g.Number?c:b===g.String?a+" "+c:new Date}var d=this;d.size=function(){return b},d["with"]=function(a,b){if(!a||"string"!=typeof a)throw new Error('"with" requires a valid name for the member.');if(!f(b))throw new Error('"with" requires one of the MemberType enum values or a generator function as the second argument.');return d.$with(a,b),d},d.build=function(){return d.$build()},d.$with=function(a,b){throw new Error("Not Implemented")},d.$build=function(){throw new Error("Not Implemented")},d.$$objectFromTemplate=function(a,b){var d={};for(var e in a)a.hasOwnProperty(e)&&(d[e]=c(e,a[e],b));return d}}function b(b){var c=this;a.call(c,b,1);var d=e(b);c.$build=function(){return c.$$objectFromTemplate(d,1)},c.$with=function(a,b){d[a]=b}}function c(b,c){function d(a){return{size:a,template:e(b)}}function f(){for(var a=0,b=0;b<q.length;b++)a+=q[b].size;return a}function g(){if(!l)throw new Error('A call to "theNext" must follow a call to "theFirst".')}function h(){if(m)throw new Error('"theNext" cannot be used once "theLast" has been used.')}function i(){return l?l.size:0}function j(a){if(i()+f()+a>c)throw new Error('Cannot exceed bounds of original builder with "theNext".')}function k(a){if(i()+f()+a>c)throw new Error('Cannot exceed bounds of original builder with "theLast".')}var l,m,n,o,p=this,q=[];a.call(p,b,c),n=d(0),o=n,p.theFirst=function(a){return a||(a=1),l=d(a),o=l,p},p.theNext=function(a){a||(a=1),g(),h(),j(a);var b=d(a);return q.push(b),o=b,p},p.theLast=function(a){return a||(a=1),k(a),m=d(a),o=m,p},p.theRemainder=function(){return o=n,p},p.$build=function(){var a=p.size(),b=[0,a],c=[];if(l){for(var d=0;d<l.size;d++)c[d]=p.$$objectFromTemplate(l.template,d+1);b[0]=l.size}if(q.length){for(var e=l.size,f=0,g=0;g<q.length;g++){var h=q[g];f=e+h.size;for(var i=e;f>i;i++)c[i]=p.$$objectFromTemplate(h.template,i+1);e=f}b[0]=f}if(m){for(var e=p.size()-m.size,f=p.size(),j=e;f>j;j++)c[j]=p.$$objectFromTemplate(m.template,j+1);b[1]=e}for(var k=b[0];k<b[1];k++)c[k]=p.$$objectFromTemplate(n.template,k+1);return c},p.$with=function(a,b){o.template[a]=b}}function d(){function a(a){for(var b in a)if(a.hasOwnProperty(b)&&!f(a[b]))throw new Error("Template must be an object with fields that should be defined on built objects with their required type using the MemberType enum or a generator function that will be called with an argument indicating the position of the item in any collection.")}function d(b){return b&&"object"==typeof b?(a(b),b):{}}function e(a,b){return a&&"number"==typeof a?a:b&&"number"==typeof b?b:1}var h=this;h.create=function(a,f){var g=d(a),h=e(a,f);return h>1?new c(g,h):new b(g)},h.MemberType=g}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function f(a){return!("function"!=typeof a&&a!==g.String&&a!==g.Number&&a!==g.Date)}var g={String:"string",Number:"number",Date:"date"},h=new d;"undefined"!=typeof window?window.builder=h:"function"==typeof require&&("function"==typeof define?define([],function(){return h}):module.exports=h)}();